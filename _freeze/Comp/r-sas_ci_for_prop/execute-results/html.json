{
  "hash": "1c26ba0717fa367096a2437bc1928baa",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"R vs SAS Confidence Intervals for Proportions\"\nexecute:\n  eval: false\n---\n\n\n\n## Introduction\n\nThe methods to use for calculating a confidence interval (CI) for a proportion depend on the type of proportion you have.\n\n-   1 sample proportion (1 proportion calculated from 1 group of subjects)\n\n-   2 sample proportions and you want a CI for the difference in the 2 proportions.\n\n    -   If the 2 samples come from 2 independent samples (different subjects in each of the 2 groups)\n\n    -   If the 2 samples are matched (i.e. the same subject has 2 results, one on each group \\[paired data\\]).\n\nThe method selected is also dependent on whether your proportion is close to 0 or 1 (or near to the 0.5 midpoint), and your sample size.\n\nFor more technical derivation and reasons why you would use one method above another see the corresponding [SAS page](https://psiaims.github.io/CAMIS/SAS/ci_for_prop.html).\n\nThe tables below provide an overview of findings from R & SAS, for calculation of CIs, for a Single Sample Proportion and for calculation of a difference between 2 matched pair proportions or 2 independent sample proportions.\n\n## General Comparison Table For Single Sample Proportions\n\nSee the corresponding [SAS page](https://psiaims.github.io/CAMIS/SAS/ci_for_prop.html) and [R page](https://psiaims.github.io/CAMIS/R/ci_for_prop.html) for results showing a single set of data which has been run through both SAS and R.\n\n+--------------------------------------------------------------------+----------------+------------------+----------------------------------------+\n| Analysis of One Sample Proportion                                  | Supported in R | Supported in SAS | Results Match                          |\n+====================================================================+================+==================+========================================+\n| Clopper-Pearson Exact                                              | Yes {cardx}    | Yes (default)    | Yes                                    |\n+--------------------------------------------------------------------+----------------+------------------+----------------------------------------+\n| Normal approximation (Wald Method)                                 | Yes {cardx}    | Yes (default)    | Yes                                    |\n+--------------------------------------------------------------------+----------------+------------------+----------------------------------------+\n| Normal approximation (Wald Method) with continuity correction      | Yes {cardx}    | Yes              | Yes                                    |\n+--------------------------------------------------------------------+----------------+------------------+----------------------------------------+\n| Wilson (Score, Altman, Newcombe) method                            | Yes {cardx}    | Yes              | Yes                                    |\n+--------------------------------------------------------------------+----------------+------------------+----------------------------------------+\n| Wilson (Score, Altman, Newcombe) method with continuity correction | Yes {cardx}    | Yes              | Yes                                    |\n+--------------------------------------------------------------------+----------------+------------------+----------------------------------------+\n| Agresti Coull                                                      | Yes {cardx}    | Yes              | Yes                                    |\n+--------------------------------------------------------------------+----------------+------------------+----------------------------------------+\n| Jeffreys Bayesian HPD                                              | Yes {cardx}    | Yes              | Yes                                    |\n+--------------------------------------------------------------------+----------------+------------------+----------------------------------------+\n| midp                                                               | Yes {PropCIs}  | Yes              | results match to the 3rd decimal place |\n+--------------------------------------------------------------------+----------------+------------------+----------------------------------------+\n| Blaker                                                             | Yes {PropCIs}  | Yes              | results match to the 5th decimal place |\n+--------------------------------------------------------------------+----------------+------------------+----------------------------------------+\n| Wilson Stratified score                                            | Yes {cardx}    | No               | NA                                     |\n+--------------------------------------------------------------------+----------------+------------------+----------------------------------------+\n\n## General Comparison Table For Two Matched Samples Proportions\n\n+------------------------------------------------------+-------------------+---------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Analysis of Two Matched Sample Proportions           | Supported in R    | Supported in SAS                                                                            | Notes                                                                                                                                                     |\n+======================================================+===================+=============================================================================================+===========================================================================================================================================================+\n| Exact method                                         | Yes {ExactCIdiff} | No                                                                                          |                                                                                                                                                           |\n+------------------------------------------------------+-------------------+---------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Normal approximation (Wald Method)                   | No                | No (proc freq does CIs for the risk difference, not the difference between two proportions) | Using the equations provided in the [SAS page](https://psiaims.github.io/CAMIS/SAS/ci_for_prop.html), You could do this programatically in either package |\n+------------------------------------------------------+-------------------+---------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Wilson (Score method or the Altman, Newcombe method) | No                | No (proc freq does CIs for the risk difference, not the difference between two proportions) | Using the equations provided in the [SAS page](https://psiaims.github.io/CAMIS/SAS/ci_for_prop.html), You could do this programatically in either package |\n+------------------------------------------------------+-------------------+---------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------+\n\nCalculating the Normal approximation and Wilson methods by hand and comparing it to the Exact method gave similar results for the 1 example demonstrated indicating as long as the proportion of responders is not close to 0 or 1, then the faster computation of the approximation methods may be easier to implement than the exact method and produce similar results. Hence {ExactCIdiff} is not recommended for most scenarios.\n\n+-------------+----------------------------------------------------------------------------------------------+--------------+--------------+\n| Method Name | Calculated Using matched pair example from R & SAS pages                                     | Lower 95% CI | Upper 95% CI |\n+=============+==============================================================================================+==============+==============+\n| Exact       | R                                                                                            | -0.00339     | 0.38065      |\n+-------------+----------------------------------------------------------------------------------------------+--------------+--------------+\n| Normal      | by hand using equation from [SAS page](https://psiaims.github.io/CAMIS/SAS/ci_for_prop.html) | 0.00911      | 0.38289      |\n+-------------+----------------------------------------------------------------------------------------------+--------------+--------------+\n| Wilson      | by hand using equation from [SAS page](https://psiaims.github.io/CAMIS/SAS/ci_for_prop.html) | 0.00032      | 0.36739      |\n+-------------+----------------------------------------------------------------------------------------------+--------------+--------------+\n\n## General Comparison Table For Two Independent Samples Proportions\n\n+--------------------------------------------------------------------+--------------------------------------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Analysis of Two Independant Sample Proportions                     | Supported in R                                                     | Supported in SAS | Results Match                                                                                                                                                                                                                                 |\n+====================================================================+====================================================================+==================+===============================================================================================================================================================================================================================================+\n| Normal approximation (Wald Method)                                 | Yes {DescTools}                                                    | Yes (default)    | Yes and results match by hand calculation                                                                                                                                                                                                     |\n|                                                                    |                                                                    |                  |                                                                                                                                                                                                                                               |\n|                                                                    | `BinomDiffCI(..,method=c(\"wald\"))`                                 |                  | **Warning** The documentation for stats::prop.test which is used in {cardx} says it's using newcombe method. However, the results match the Normal Approximation (wald) method. Hence it is reccomended to use {DescTools} instead of {cardx} |\n|                                                                    |                                                                    |                  |                                                                                                                                                                                                                                               |\n|                                                                    | Yes {cardx} `ard_stats_prop_test function` uses `stats::prop.test` |                  |                                                                                                                                                                                                                                               |\n+--------------------------------------------------------------------+--------------------------------------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Normal approximation (Wald Method) with continuity correction      | Yes {DescTools}                                                    | Yes              | Yes                                                                                                                                                                                                                                           |\n|                                                                    |                                                                    |                  |                                                                                                                                                                                                                                               |\n|                                                                    | `BinomDiffCI(..,method=c(\"waldcc\"))`                               |                  | **Warning** that documentation for stats::prop.test says it's using newcombe method. However, the results match the Normal Approximation (wald) method.                                                                                       |\n|                                                                    |                                                                    |                  |                                                                                                                                                                                                                                               |\n|                                                                    | Yes {cardx} as per above but with correct=TRUE                     |                  |                                                                                                                                                                                                                                               |\n+--------------------------------------------------------------------+--------------------------------------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Wilson (Score, Altman, Newcombe) method                            | Yes {DescTools}                                                    | Yes              | Yes and results match by hand calculation                                                                                                                                                                                                     |\n|                                                                    |                                                                    |                  |                                                                                                                                                                                                                                               |\n|                                                                    | `BinomDiffCI(..,method=c(\"score\"))`                                |                  |                                                                                                                                                                                                                                               |\n+--------------------------------------------------------------------+--------------------------------------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Wilson (Score, Altman, Newcombe) method with continuity correction | Yes {DescTools}                                                    | Yes              | Yes                                                                                                                                                                                                                                           |\n|                                                                    |                                                                    |                  |                                                                                                                                                                                                                                               |\n|                                                                    | `BinomDiffCI(..,method=c(\"scorecc\"))`                              |                  |                                                                                                                                                                                                                                               |\n+--------------------------------------------------------------------+--------------------------------------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Agresti-Caffo                                                      | Yes {DescTools}                                                    | Yes              | Yes                                                                                                                                                                                                                                           |\n|                                                                    |                                                                    |                  |                                                                                                                                                                                                                                               |\n|                                                                    | `BinomDiffCI(..,method=c(\"ac\"))`                                   |                  |                                                                                                                                                                                                                                               |\n+--------------------------------------------------------------------+--------------------------------------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Hauck-Anderson                                                     | Yes {DescTools}                                                    | Yes              | Yes                                                                                                                                                                                                                                           |\n|                                                                    |                                                                    |                  |                                                                                                                                                                                                                                               |\n|                                                                    | `BinomDiffCI(..,method=c(\"ha\"))`                                   |                  |                                                                                                                                                                                                                                               |\n+--------------------------------------------------------------------+--------------------------------------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n| Miettinen-Nurminen                                                 | Yes {DescTools}                                                    | Yes              | Yes                                                                                                                                                                                                                                           |\n|                                                                    |                                                                    |                  |                                                                                                                                                                                                                                               |\n|                                                                    | `BinomDiffCI(..,method=c(\"mn\"))`                                   |                  |                                                                                                                                                                                                                                               |\n+--------------------------------------------------------------------+--------------------------------------------------------------------+------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+\n\n## Prerequisites: R Packages\n\nSee the [R page](https://psiaims.github.io/CAMIS/R/ci_for_prop.html) for more detail.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Example R packages required\nlibrary(cardx) \n```\n:::\n\n\n\n## \n",
    "supporting": [
      "r-sas_ci_for_prop_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}