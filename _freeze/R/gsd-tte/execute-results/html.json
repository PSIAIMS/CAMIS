{
  "hash": "ba15b5fb3b7a19b4dd2f1838f2c387ad",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Group sequential design in R\"\neditor_options:\n  chunk_output_type: console\n---\n\n\n\n## Group sequential design: time-to-event endpoint\n\nWhile a group sequential design (GSD) could be applied for different types of endpoints, here we focus on time-to-event endpoints.\n\n## Available R packages\n\nThe commonly used R packages for power and sample size calculations utilizing a GSD are: [gsDesign](https://keaven.github.io/gsDesign/) (also has a [web interface](https://rinpharma.shinyapps.io/gsdesign/)), [gsDesign2](https://merck.github.io/gsDesign2/), and [rpact](https://www.rpact.org/).\n\n## Design assumptions\n\nUsing a toy example, we will assume that a primary objective of a phase III oncology trial is to compare a new therapy to a control in terms of progression-free survival (PFS) and overall survival (OS). Note that, in this example, we have a family of primary endpoints, i.e., if at least one of the endpoints is successful, the study will be declared a success. A GSD will be utilized for each endpoint. PFS will be tested at one interim analysis (IA) for both efficacy and non-binding futility, while OS will be tested at two IAs for efficacy only. An O'Brien-Fleming spending function will be used for efficacy testing and a Hwang-Shih-Decani spending function with $\\gamma = -10$ will be used for futility.\n\nFurther design assumptions are as follows:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# PFS HR = 0.6\nhr1_pfs <- 0.6\n# Median PFS of 9.4 months in the control arm\nmed_pfs <- 9.4\n# Median follow-up of 10 months for PFS\nminfu_pfs <- 10\n# Monthly dropout of 0.019 for PFS\ndo_rate_pfs <- 0.019\n# IA timing for PFS is at 75% information fraction\ntiming_pfs <- c(0.75, 1)\n# Power of 95% for PFS\npower_pfs <- 0.95\n\n# OS HR = 0.65\nhr1_os <- 0.65\n# Median OS of 3 years in the control arm\nmed_os <- 12 * 3\n# Median follow-up of 42 months for OS\nminfu_os <- 42\n# Monthly dropout of 0.001 for OS\ndo_rate_os <- 0.001\n# IA timing for OS is at 60% and 80% information fraction\ntiming_os <- c(0.6, 0.8, 1)\n# Power of 82% for OS\npower_os <- 0.82\n\n# Enrollment period of 24 months\nenroll_dur <- 24\n# 1:1 randomization ratio\nrand_ratio <- 1\n# alpha level of 1.25% for each endpoint\nalphal <- 0.0125\n```\n:::\n\n\n\nWe assume that given the above assumptions, we need to calculate the target number of events for each analysis as well as the total sample size.\n\n## Example code\n\n### Example using gsDesign\n\n-   PFS calculations:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(gsDesign)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npfs_gsDesign <- gsSurv(\n  k = length(timing_pfs),\n  timing = timing_pfs,\n  R = enroll_dur,\n  eta = do_rate_pfs,\n  minfup = minfu_pfs,\n  T = enroll_dur + minfu_pfs,\n  lambdaC = log(2) / med_pfs,\n  hr = hr1_pfs,\n  beta = 1 - power_pfs,\n  alpha = alphal,\n  sfu = sfLDOF,\n  sfl = sfHSD,\n  sflpar = -10,\n  test.type = 4\n)\n\npfs_gsDesign |> gsBoundSummary()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n    Analysis              Value Efficacy Futility\n   IA 1: 75%                  Z   2.6584   0.7432\n      N: 398        p (1-sided)   0.0039   0.2287\n Events: 176       ~HR at bound   0.6693   0.8938\n   Month: 25   P(Cross) if HR=1   0.0039   0.7713\n             P(Cross) if HR=0.6   0.7668   0.0041\n       Final                  Z   2.2801   2.2801\n      N: 398        p (1-sided)   0.0113   0.0113\n Events: 234       ~HR at bound   0.7421   0.7421\n   Month: 34   P(Cross) if HR=1   0.0125   0.9875\n             P(Cross) if HR=0.6   0.9500   0.0500\n```\n\n\n:::\n:::\n\n\n\n-   OS calculations:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nos_gsDesign <- gsSurv(\n  k = length(timing_os),\n  timing = timing_os,\n  R = enroll_dur,\n  eta = do_rate_os,\n  minfup = minfu_os,\n  T = enroll_dur + minfu_os,\n  lambdaC = log(2) / med_os,\n  hr = hr1_os,\n  beta = 1 - power_os,\n  alpha = alphal,\n  sfu = sfLDOF,\n  test.type = 1\n)\n\nos_gsDesign |> gsBoundSummary()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n    Analysis               Value Efficacy\n   IA 1: 60%                   Z   3.0205\n      N: 394         p (1-sided)   0.0013\n Events: 131        ~HR at bound   0.5896\n   Month: 38    P(Cross) if HR=1   0.0013\n             P(Cross) if HR=0.65   0.2899\n   IA 2: 80%                   Z   2.5874\n      N: 394         p (1-sided)   0.0048\n Events: 175        ~HR at bound   0.6758\n   Month: 51    P(Cross) if HR=1   0.0052\n             P(Cross) if HR=0.65   0.6082\n       Final                   Z   2.2958\n      N: 394         p (1-sided)   0.0108\n Events: 218        ~HR at bound   0.7327\n   Month: 66    P(Cross) if HR=1   0.0125\n             P(Cross) if HR=0.65   0.8200\n```\n\n\n:::\n:::\n\n\n\n### Example using gsDesign2\n\n-   PFS calculations:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(gsDesign2)\nlibrary(tibble)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nenroll_rate <- tibble(\n  stratum = \"All\",\n  duration = enroll_dur,\n  rate = 1\n)\nfail_rate_pfs <- tibble(\n  stratum = \"All\",\n  duration = Inf, # Can be set to `Inf` when proportional hazard is assumed\n  fail_rate = log(2) / med_pfs,\n  hr = hr1_pfs,\n  dropout_rate = do_rate_pfs\n)\n\npfs_gsDesign2 <- gs_design_ahr(\n  enroll_rate = enroll_rate,\n  fail_rate = fail_rate_pfs,\n  ratio = rand_ratio,\n  beta = 1 - power_pfs,\n  alpha = alphal,\n  info_frac = timing_pfs,\n  analysis_time = enroll_dur + minfu_pfs,\n  upper = gs_spending_bound,\n  upar = list(\n    sf = gsDesign::sfLDOF,\n    total_spend = alphal\n  ),\n  lower = gs_spending_bound,\n  lpar = list(\n    sf = gsDesign::sfHSD,\n    total_spend = 1 - power_pfs,\n    param = -10\n  ),\n  info_scale = \"h0_info\"\n)\n\npfs_gsDesign2 |>\n  summary() |>\n  as_gt()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"kjhucvwrok\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#kjhucvwrok table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#kjhucvwrok thead, #kjhucvwrok tbody, #kjhucvwrok tfoot, #kjhucvwrok tr, #kjhucvwrok td, #kjhucvwrok th {\n  border-style: none;\n}\n\n#kjhucvwrok p {\n  margin: 0;\n  padding: 0;\n}\n\n#kjhucvwrok .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#kjhucvwrok .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#kjhucvwrok .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#kjhucvwrok .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#kjhucvwrok .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kjhucvwrok .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kjhucvwrok .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kjhucvwrok .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#kjhucvwrok .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#kjhucvwrok .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#kjhucvwrok .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#kjhucvwrok .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#kjhucvwrok .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#kjhucvwrok .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#kjhucvwrok .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#kjhucvwrok .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#kjhucvwrok .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#kjhucvwrok .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#kjhucvwrok .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kjhucvwrok .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#kjhucvwrok .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#kjhucvwrok .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#kjhucvwrok .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kjhucvwrok .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#kjhucvwrok .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#kjhucvwrok .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kjhucvwrok .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kjhucvwrok .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#kjhucvwrok .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kjhucvwrok .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#kjhucvwrok .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#kjhucvwrok .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kjhucvwrok .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kjhucvwrok .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kjhucvwrok .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kjhucvwrok .gt_left {\n  text-align: left;\n}\n\n#kjhucvwrok .gt_center {\n  text-align: center;\n}\n\n#kjhucvwrok .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#kjhucvwrok .gt_font_normal {\n  font-weight: normal;\n}\n\n#kjhucvwrok .gt_font_bold {\n  font-weight: bold;\n}\n\n#kjhucvwrok .gt_font_italic {\n  font-style: italic;\n}\n\n#kjhucvwrok .gt_super {\n  font-size: 65%;\n}\n\n#kjhucvwrok .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#kjhucvwrok .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#kjhucvwrok .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#kjhucvwrok .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#kjhucvwrok .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#kjhucvwrok .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#kjhucvwrok .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#kjhucvwrok .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#kjhucvwrok div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"6\" class=\"gt_heading gt_title gt_font_normal\" style>Bound summary for AHR design</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"6\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>AHR approximations of ~HR at bound</td>\n    </tr>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Bound\">Bound</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Z\">Z</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Nominal-p\">Nominal p<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"a~HR-at-bound\">~HR at bound<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>2</sup></span></th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"Cumulative boundary crossing probability\">\n        <div class=\"gt_column_spanner\">Cumulative boundary crossing probability</div>\n      </th>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Alternate-hypothesis\">Alternate hypothesis</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Null-hypothesis\">Null hypothesis</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"6\" class=\"gt_group_heading\" scope=\"colgroup\" id=\"Analysis: 1 Time: 25.3 N: 405.8 Events: 179.2 AHR: 0.6 Information fraction: 0.75\">Analysis: 1 Time: 25.3 N: 405.8 Events: 179.2 AHR: 0.6 Information fraction: 0.75</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Analysis: 1 Time: 25.3 N: 405.8 Events: 179.2 AHR: 0.6 Information fraction: 0.75  Bound\" class=\"gt_row gt_left\">Futility</td>\n<td headers=\"Analysis: 1 Time: 25.3 N: 405.8 Events: 179.2 AHR: 0.6 Information fraction: 0.75  Z\" class=\"gt_row gt_right\">0.74</td>\n<td headers=\"Analysis: 1 Time: 25.3 N: 405.8 Events: 179.2 AHR: 0.6 Information fraction: 0.75  Nominal p\" class=\"gt_row gt_right\">0.2287</td>\n<td headers=\"Analysis: 1 Time: 25.3 N: 405.8 Events: 179.2 AHR: 0.6 Information fraction: 0.75  ~HR at bound\" class=\"gt_row gt_right\">0.8940</td>\n<td headers=\"Analysis: 1 Time: 25.3 N: 405.8 Events: 179.2 AHR: 0.6 Information fraction: 0.75  Alternate hypothesis\" class=\"gt_row gt_right\">0.0041</td>\n<td headers=\"Analysis: 1 Time: 25.3 N: 405.8 Events: 179.2 AHR: 0.6 Information fraction: 0.75  Null hypothesis\" class=\"gt_row gt_right\">0.7713</td></tr>\n    <tr><td headers=\"Analysis: 1 Time: 25.3 N: 405.8 Events: 179.2 AHR: 0.6 Information fraction: 0.75  Bound\" class=\"gt_row gt_left\">Efficacy</td>\n<td headers=\"Analysis: 1 Time: 25.3 N: 405.8 Events: 179.2 AHR: 0.6 Information fraction: 0.75  Z\" class=\"gt_row gt_right\">2.66</td>\n<td headers=\"Analysis: 1 Time: 25.3 N: 405.8 Events: 179.2 AHR: 0.6 Information fraction: 0.75  Nominal p\" class=\"gt_row gt_right\">0.0039</td>\n<td headers=\"Analysis: 1 Time: 25.3 N: 405.8 Events: 179.2 AHR: 0.6 Information fraction: 0.75  ~HR at bound\" class=\"gt_row gt_right\">0.6697</td>\n<td headers=\"Analysis: 1 Time: 25.3 N: 405.8 Events: 179.2 AHR: 0.6 Information fraction: 0.75  Alternate hypothesis\" class=\"gt_row gt_right\">0.7668</td>\n<td headers=\"Analysis: 1 Time: 25.3 N: 405.8 Events: 179.2 AHR: 0.6 Information fraction: 0.75  Null hypothesis\" class=\"gt_row gt_right\">0.0039</td></tr>\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"6\" class=\"gt_group_heading\" scope=\"colgroup\" id=\"Analysis: 2 Time: 34 N: 405.8 Events: 238.9 AHR: 0.6 Information fraction: 1\">Analysis: 2 Time: 34 N: 405.8 Events: 238.9 AHR: 0.6 Information fraction: 1</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Analysis: 2 Time: 34 N: 405.8 Events: 238.9 AHR: 0.6 Information fraction: 1  Bound\" class=\"gt_row gt_left\">Futility</td>\n<td headers=\"Analysis: 2 Time: 34 N: 405.8 Events: 238.9 AHR: 0.6 Information fraction: 1  Z\" class=\"gt_row gt_right\">2.28</td>\n<td headers=\"Analysis: 2 Time: 34 N: 405.8 Events: 238.9 AHR: 0.6 Information fraction: 1  Nominal p\" class=\"gt_row gt_right\">0.0113</td>\n<td headers=\"Analysis: 2 Time: 34 N: 405.8 Events: 238.9 AHR: 0.6 Information fraction: 1  ~HR at bound\" class=\"gt_row gt_right\">0.7424</td>\n<td headers=\"Analysis: 2 Time: 34 N: 405.8 Events: 238.9 AHR: 0.6 Information fraction: 1  Alternate hypothesis\" class=\"gt_row gt_right\">0.0500</td>\n<td headers=\"Analysis: 2 Time: 34 N: 405.8 Events: 238.9 AHR: 0.6 Information fraction: 1  Null hypothesis\" class=\"gt_row gt_right\">0.9875</td></tr>\n    <tr><td headers=\"Analysis: 2 Time: 34 N: 405.8 Events: 238.9 AHR: 0.6 Information fraction: 1  Bound\" class=\"gt_row gt_left\">Efficacy</td>\n<td headers=\"Analysis: 2 Time: 34 N: 405.8 Events: 238.9 AHR: 0.6 Information fraction: 1  Z\" class=\"gt_row gt_right\">2.28</td>\n<td headers=\"Analysis: 2 Time: 34 N: 405.8 Events: 238.9 AHR: 0.6 Information fraction: 1  Nominal p\" class=\"gt_row gt_right\">0.0113</td>\n<td headers=\"Analysis: 2 Time: 34 N: 405.8 Events: 238.9 AHR: 0.6 Information fraction: 1  ~HR at bound\" class=\"gt_row gt_right\">0.7424</td>\n<td headers=\"Analysis: 2 Time: 34 N: 405.8 Events: 238.9 AHR: 0.6 Information fraction: 1  Alternate hypothesis\" class=\"gt_row gt_right\">0.9500</td>\n<td headers=\"Analysis: 2 Time: 34 N: 405.8 Events: 238.9 AHR: 0.6 Information fraction: 1  Null hypothesis\" class=\"gt_row gt_right\">0.0125</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"6\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span> One-sided p-value for experimental vs control treatment. Value &lt; 0.5 favors experimental, &gt; 0.5 favors control.</td>\n    </tr>\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"6\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>2</sup></span> Approximate hazard ratio to cross bound.</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n-   OS calculations:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfail_rate_os <- tibble(\n  stratum = \"All\",\n  duration = Inf, # Can be set to `Inf` when proportional hazard is assumed\n  fail_rate = log(2) / med_os,\n  hr = hr1_os,\n  dropout_rate = do_rate_os\n)\n\nos_gsDesign2 <- gs_design_ahr(\n  enroll_rate = pfs_gsDesign2$enroll_rate,\n  fail_rate = fail_rate_os,\n  ratio = rand_ratio,\n  beta = 1 - power_os,\n  alpha = alphal,\n  info_frac = timing_os,\n  analysis_time = enroll_dur + minfu_os,\n  test_lower = FALSE,\n  upper = gs_spending_bound,\n  upar = list(\n    sf = gsDesign::sfLDOF,\n    total_spend = alphal\n  ),\n  info_scale = \"h0_info\"\n)\n\nos_gsDesign2 |>\n  summary() |>\n  as_gt()\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"bkdqeqkmmb\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#bkdqeqkmmb table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#bkdqeqkmmb thead, #bkdqeqkmmb tbody, #bkdqeqkmmb tfoot, #bkdqeqkmmb tr, #bkdqeqkmmb td, #bkdqeqkmmb th {\n  border-style: none;\n}\n\n#bkdqeqkmmb p {\n  margin: 0;\n  padding: 0;\n}\n\n#bkdqeqkmmb .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#bkdqeqkmmb .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#bkdqeqkmmb .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#bkdqeqkmmb .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#bkdqeqkmmb .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#bkdqeqkmmb .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bkdqeqkmmb .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#bkdqeqkmmb .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#bkdqeqkmmb .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#bkdqeqkmmb .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#bkdqeqkmmb .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#bkdqeqkmmb .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#bkdqeqkmmb .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#bkdqeqkmmb .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#bkdqeqkmmb .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#bkdqeqkmmb .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#bkdqeqkmmb .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#bkdqeqkmmb .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#bkdqeqkmmb .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bkdqeqkmmb .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#bkdqeqkmmb .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#bkdqeqkmmb .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#bkdqeqkmmb .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bkdqeqkmmb .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#bkdqeqkmmb .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#bkdqeqkmmb .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bkdqeqkmmb .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bkdqeqkmmb .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#bkdqeqkmmb .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bkdqeqkmmb .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#bkdqeqkmmb .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#bkdqeqkmmb .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#bkdqeqkmmb .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bkdqeqkmmb .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#bkdqeqkmmb .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#bkdqeqkmmb .gt_left {\n  text-align: left;\n}\n\n#bkdqeqkmmb .gt_center {\n  text-align: center;\n}\n\n#bkdqeqkmmb .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#bkdqeqkmmb .gt_font_normal {\n  font-weight: normal;\n}\n\n#bkdqeqkmmb .gt_font_bold {\n  font-weight: bold;\n}\n\n#bkdqeqkmmb .gt_font_italic {\n  font-style: italic;\n}\n\n#bkdqeqkmmb .gt_super {\n  font-size: 65%;\n}\n\n#bkdqeqkmmb .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#bkdqeqkmmb .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#bkdqeqkmmb .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#bkdqeqkmmb .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#bkdqeqkmmb .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#bkdqeqkmmb .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#bkdqeqkmmb .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#bkdqeqkmmb .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#bkdqeqkmmb div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"6\" class=\"gt_heading gt_title gt_font_normal\" style>Bound summary for AHR design</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"6\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>AHR approximations of ~HR at bound</td>\n    </tr>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Bound\">Bound</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Z\">Z</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Nominal-p\">Nominal p<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"a~HR-at-bound\">~HR at bound<span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>2</sup></span></th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"2\" scope=\"colgroup\" id=\"Cumulative boundary crossing probability\">\n        <div class=\"gt_column_spanner\">Cumulative boundary crossing probability</div>\n      </th>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Alternate-hypothesis\">Alternate hypothesis</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Null-hypothesis\">Null hypothesis</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"6\" class=\"gt_group_heading\" scope=\"colgroup\" id=\"Analysis: 1 Time: 38.4 N: 402.6 Events: 133.7 AHR: 0.65 Information fraction: 0.6\">Analysis: 1 Time: 38.4 N: 402.6 Events: 133.7 AHR: 0.65 Information fraction: 0.6</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Analysis: 1 Time: 38.4 N: 402.6 Events: 133.7 AHR: 0.65 Information fraction: 0.6  Bound\" class=\"gt_row gt_left\">Efficacy</td>\n<td headers=\"Analysis: 1 Time: 38.4 N: 402.6 Events: 133.7 AHR: 0.65 Information fraction: 0.6  Z\" class=\"gt_row gt_right\">3.02</td>\n<td headers=\"Analysis: 1 Time: 38.4 N: 402.6 Events: 133.7 AHR: 0.65 Information fraction: 0.6  Nominal p\" class=\"gt_row gt_right\">0.0013</td>\n<td headers=\"Analysis: 1 Time: 38.4 N: 402.6 Events: 133.7 AHR: 0.65 Information fraction: 0.6  ~HR at bound\" class=\"gt_row gt_right\">0.5901</td>\n<td headers=\"Analysis: 1 Time: 38.4 N: 402.6 Events: 133.7 AHR: 0.65 Information fraction: 0.6  Alternate hypothesis\" class=\"gt_row gt_right\">0.2899</td>\n<td headers=\"Analysis: 1 Time: 38.4 N: 402.6 Events: 133.7 AHR: 0.65 Information fraction: 0.6  Null hypothesis\" class=\"gt_row gt_right\">0.0013</td></tr>\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"6\" class=\"gt_group_heading\" scope=\"colgroup\" id=\"Analysis: 2 Time: 50.6 N: 402.6 Events: 178.2 AHR: 0.65 Information fraction: 0.8\">Analysis: 2 Time: 50.6 N: 402.6 Events: 178.2 AHR: 0.65 Information fraction: 0.8</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Analysis: 2 Time: 50.6 N: 402.6 Events: 178.2 AHR: 0.65 Information fraction: 0.8  Bound\" class=\"gt_row gt_left\">Efficacy</td>\n<td headers=\"Analysis: 2 Time: 50.6 N: 402.6 Events: 178.2 AHR: 0.65 Information fraction: 0.8  Z\" class=\"gt_row gt_right\">2.59</td>\n<td headers=\"Analysis: 2 Time: 50.6 N: 402.6 Events: 178.2 AHR: 0.65 Information fraction: 0.8  Nominal p\" class=\"gt_row gt_right\">0.0048</td>\n<td headers=\"Analysis: 2 Time: 50.6 N: 402.6 Events: 178.2 AHR: 0.65 Information fraction: 0.8  ~HR at bound\" class=\"gt_row gt_right\">0.6762</td>\n<td headers=\"Analysis: 2 Time: 50.6 N: 402.6 Events: 178.2 AHR: 0.65 Information fraction: 0.8  Alternate hypothesis\" class=\"gt_row gt_right\">0.6082</td>\n<td headers=\"Analysis: 2 Time: 50.6 N: 402.6 Events: 178.2 AHR: 0.65 Information fraction: 0.8  Null hypothesis\" class=\"gt_row gt_right\">0.0052</td></tr>\n    <tr class=\"gt_group_heading_row\">\n      <th colspan=\"6\" class=\"gt_group_heading\" scope=\"colgroup\" id=\"Analysis: 3 Time: 66 N: 402.6 Events: 222.8 AHR: 0.65 Information fraction: 1\">Analysis: 3 Time: 66 N: 402.6 Events: 222.8 AHR: 0.65 Information fraction: 1</th>\n    </tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Analysis: 3 Time: 66 N: 402.6 Events: 222.8 AHR: 0.65 Information fraction: 1  Bound\" class=\"gt_row gt_left\">Efficacy</td>\n<td headers=\"Analysis: 3 Time: 66 N: 402.6 Events: 222.8 AHR: 0.65 Information fraction: 1  Z\" class=\"gt_row gt_right\">2.30</td>\n<td headers=\"Analysis: 3 Time: 66 N: 402.6 Events: 222.8 AHR: 0.65 Information fraction: 1  Nominal p\" class=\"gt_row gt_right\">0.0108</td>\n<td headers=\"Analysis: 3 Time: 66 N: 402.6 Events: 222.8 AHR: 0.65 Information fraction: 1  ~HR at bound\" class=\"gt_row gt_right\">0.7330</td>\n<td headers=\"Analysis: 3 Time: 66 N: 402.6 Events: 222.8 AHR: 0.65 Information fraction: 1  Alternate hypothesis\" class=\"gt_row gt_right\">0.8200</td>\n<td headers=\"Analysis: 3 Time: 66 N: 402.6 Events: 222.8 AHR: 0.65 Information fraction: 1  Null hypothesis\" class=\"gt_row gt_right\">0.0125</td></tr>\n  </tbody>\n  \n  <tfoot class=\"gt_footnotes\">\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"6\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>1</sup></span> One-sided p-value for experimental vs control treatment. Value &lt; 0.5 favors experimental, &gt; 0.5 favors control.</td>\n    </tr>\n    <tr>\n      <td class=\"gt_footnote\" colspan=\"6\"><span class=\"gt_footnote_marks\" style=\"white-space:nowrap;font-style:italic;font-weight:normal;line-height:0;\"><sup>2</sup></span> Approximate hazard ratio to cross bound.</td>\n    </tr>\n  </tfoot>\n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n### Example using rpact\n\n-   PFS calculations:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(rpact)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npfs_rpact_gsd <- getDesignGroupSequential(\n  sided = 1,\n  alpha = alphal,\n  informationRates = timing_pfs,\n  typeOfDesign = \"asOF\",\n  beta = 1 - power_pfs,\n  typeBetaSpending = \"bsHSD\",\n  gammaB = -10,\n  bindingFutility = FALSE\n)\n\npfs_rpact <- getSampleSizeSurvival(\n  design = pfs_rpact_gsd,\n  accrualTime = enroll_dur,\n  followUpTime = minfu_pfs,\n  lambda2 = log(2) / med_pfs,\n  hazardRatio = hr1_pfs,\n  dropoutRate1 = 0.2,\n  dropoutRate2 = 0.2,\n  dropoutTime = 12\n)\n\nkable(summary(pfs_rpact))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in kable.ParameterSet(summary(pfs_rpact)): Manual use of kable() for\nrpact result objects is no longer needed, as the formatting and display will be\nhandled automatically by the rpact package\n```\n\n\n:::\n\n::: {.cell-output-display}\n*Sample size calculation for a survival endpoint*\n\nSequential analysis with a maximum of 2 looks (group sequential design), \none-sided overall significance level 1.25%, power 95%.\nThe results were calculated for a two-sample logrank test, \nH0: hazard ratio = 1, H1: hazard ratio = 0.6, control lambda(2) = 0.074, \naccrual time = 24, accrual intensity = 16.5, follow-up time = 10, \ndropout rate(1) = 0.2, dropout rate(2) = 0.2, dropout time = 12.\n\n| Stage                                    |      1 |      2 |\n| ----- | ----- | ----- |\n| Planned information rate                 |    75% |   100% |\n| Cumulative alpha spent                   | 0.0039 | 0.0125 |\n| Cumulative beta spent                    | 0.0041 | 0.0500 |\n| Stage levels (one-sided)                 | 0.0039 | 0.0113 |\n| Efficacy boundary (z-value scale)        |  2.658 |  2.280 |\n| Futility boundary (z-value scale)        |  0.743 | |\n| Efficacy boundary (t)                    |  0.670 |  0.742 |\n| Futility boundary (t)                    |  0.894 | |\n| Cumulative power                         | 0.7668 | 0.9500 |\n| Number of subjects                       |  396.9 |  396.9 |\n| Expected number of subjects under H1     |        |  396.9 |\n| Cumulative number of events              |  175.8 |  234.4 |\n| Expected number of events under H1       |  189.2 | |\n| Analysis time                            |  25.36 |  34.00 |\n| Expected study duration under H1         |        |  27.34 |\n| Overall exit probability (under H0)      | 0.7752 | |\n| Overall exit probability (under H1)      | 0.7709 | |\n| Exit probability for efficacy (under H0) | 0.0039 | |\n| Exit probability for efficacy (under H1) | 0.7668 | |\n| Exit probability for futility (under H0) | 0.7713 | |\n| Exit probability for futility (under H1) | 0.0041 | |\n\nLegend:\n\n* *(t)*: treatment effect scale\n\n:::\n:::\n\n\n\nNote: the `dropoutRate1`, `dropoutRate2` arguments in `getSampleSizeSurvival()` refer to the % of drop-outs by the `dropoutTime`, while the `eta` argument in `gsDesign::gsSurv()` and the `dropout_rate` value in the `fail_rate` argument in `gsDesign2::gs_design_ahr()` refer to the annual drop-out rate parameter under the exponential distribution. In our example, if $X$ is a drop-out time and $X \\sim \\text{Exponential} (\\lambda)$, we assume that by month 12 the drop-out rate was 20%, which implies: $P(X\\le12) = 1 - e^{-12\\lambda} = 0.2 \\Rightarrow \\lambda = 0.019$. Due to the above differences, the value $\\lambda = 0.019$ was used in the gsDesign and gsDesign2 example, while 0.2 was used in the rpact example.\n\n-   OS calculations:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nos_rpact_gsd <- getDesignGroupSequential(\n  sided = 1,\n  alpha = alphal,\n  informationRates = timing_os,\n  typeOfDesign = \"asOF\",\n  beta = 1 - power_os\n)\n\nos_rpact <- getSampleSizeSurvival(\n  design = os_rpact_gsd,\n  accrualTime = enroll_dur,\n  followUpTime = minfu_os,\n  lambda2 = log(2) / med_os,\n  hazardRatio = hr1_os,\n  dropoutRate1 = 1 - exp(-do_rate_os * 12),\n  dropoutRate2 = 1 - exp(-do_rate_os * 12),\n  dropoutTime = 12\n)\n\nkable(summary(os_rpact))\n```\n\n::: {.cell-output-display}\n*Sample size calculation for a survival endpoint*\n\nSequential analysis with a maximum of 3 looks (group sequential design), \none-sided overall significance level 1.25%, power 82%.\nThe results were calculated for a two-sample logrank test, \nH0: hazard ratio = 1, H1: hazard ratio = 0.65, control lambda(2) = 0.019, \naccrual time = 24, accrual intensity = 16.5, follow-up time = 42, \ndropout rate(1) = 0.012, dropout rate(2) = 0.012, dropout time = 12.\n\n| Stage                                    |      1 |      2 |      3 |\n| ----- | ----- | ----- | ----- |\n| Planned information rate                 |    60% |    80% |   100% |\n| Cumulative alpha spent                   | 0.0013 | 0.0052 | 0.0125 |\n| Stage levels (one-sided)                 | 0.0013 | 0.0048 | 0.0108 |\n| Efficacy boundary (z-value scale)        |  3.020 |  2.587 |  2.296 |\n| Efficacy boundary (t)                    |  0.590 |  0.676 |  0.733 |\n| Cumulative power                         | 0.2899 | 0.6082 | 0.8200 |\n| Number of subjects                       |  395.1 |  395.1 |  395.1 |\n| Expected number of subjects under H1     |        |        |  395.1 |\n| Cumulative number of events              |  131.2 |  174.9 |  218.6 |\n| Expected number of events under H1       |  179.4 | | |\n| Analysis time                            |  38.44 |  50.60 |  66.00 |\n| Expected study duration under H1         |        |        |  53.11 |\n| Exit probability for efficacy (under H0) | 0.0013 | 0.0040 | |\n| Exit probability for efficacy (under H1) | 0.2899 | 0.3182 | |\n\nLegend:\n\n* *(t)*: treatment effect scale\n\n:::\n:::\n",
    "supporting": [
      "gsd-tte_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}