{
  "hash": "e3537743ac73f8cfab8e05e686b41dce",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"Binomial Test on Coin Flips and Clinical Data\"\n---\n\n\n## Simulating Coin Flips\n\nSet the seed for reproducibility and simulate 1000 coin flips using a Bernoulli distribution.\n\n\n```{sas}\n#| eval: false\n/* Set the seed for reproducibility */\n%let seed = 19;\n\ndata coin_flips;\n    call streaminit(&seed);\n    do i = 1 to 1000;\n        /* Simulate coin flips: 1 for Heads (H), 0 for Tails (T) */\n        flip = rand(\"Bernoulli\", 0.5);\n/*         flip = rand(\"BINOMIAL\", 0.5,1); */\n        if flip = 1 then result = \"H\";\n        else result = \"T\";\n        output;\n    end;\nrun;\n```\n\n\n## Counting Heads and Tails\n\nUse SQL to count how many heads and tails were observed in the simulation.\n\n\n```{sas}\n#| eval: false\nproc sql;\n    select \n        sum(result = \"H\") as heads_count,\n        sum(result = \"T\") as tails_count,\n        count(*) as total_flips\n    into :heads_count, :tails_count, :total_flips\n    from coin_flips;\nquit;\n```\n\n\n## Display the Results\n\nPrint the counts using `%put` statements.\n\n\n```{sas}\n#| eval: false\n%put Heads Count: &heads_count;\n%put Tails Count: &tails_count;\n%put Total Flips: &total_flips;\n```\n\n\n## Perform Binomial Test on Coin Flip Results\n\nUse `proc freq` to check if the observed results differ significantly from the expected probability of 0.5.\n\n\n```{sas}\nproc freq data=coin_flips;\n    tables result / binomial(p=0.5);\nrun;\n```\n\n\n## Example: Binomial Test in Clinical Trial Data\n\nWe load a clinical dataset and test if the observed death proportion is significantly different from a hypothesized value (e.g., 19%).\n\n### Import Dataset\n\n\n```{sas}\n#| eval: false\nproc import datafile='/home/u63532805/CAMIS/lung_cancer.csv'\n    out=lung_cancer\n    dbms=csv\n    replace;\n    getnames=yes;\nrun;\n```\n\n\n### Create Binary Flag for Deaths\n\n\n```{sas}\n#| eval: false\ndata lung_cancer;\n    set lung_cancer;\n    death_flag = (status = 1);\nrun;\n```\n\n\n### Perform Exact Binomial Test\n\n\n```{sas}\n#| eval: false\nproc freq data=lung_cancer;\n    tables death_flag / binomial(p=0.19 level='1');\n    title \"Exact Binomial Test for Death Proportion\";\nrun;\n```\n\n\n## SAS Output\n\n### Coin Flip Summary\n\n| heads_count | tails_count | total_flips |\n|-------------|-------------|-------------|\n| 520         | 480         | 1000        |\n\n### Binomial Test on Coin Flips\n\n**The FREQ Procedure**\n\n| result | Frequency | Percent | Cumulative Frequency | Cumulative Percent |\n|--------|-----------|---------|----------------------|--------------------|\n| H      | 520       | 52.00   | 520                  | 52.00              |\n| T      | 480       | 48.00   | 1000                 | 100.00             |\n\n**Binomial Proportion for result = H**\n\n-   Proportion: 0.5200\\\n-   ASE: 0.0158\\\n-   95% Lower Conf Limit: 0.4890\\\n-   95% Upper Conf Limit: 0.5510\n\n**Exact Confidence Limits**\n\n-   95% Lower Conf Limit: 0.4885\\\n-   95% Upper Conf Limit: 0.5514\n\n**Test of H0: Proportion = 0.5**\n\n-   ASE under H0: 0.0158\\\n-   Z: 1.2649\\\n-   One-sided Pr \\> Z: 0.1030\\\n-   Two-sided Pr \\> \\|Z\\|: 0.2059\\\n-   Sample Size: 1000\n\n### Exact Binomial Test for Death Proportion\n\n**The FREQ Procedure**\n\n| death_flag | Frequency | Percent | Cumulative Frequency | Cumulative Percent |\n|------------|-----------|---------|----------------------|--------------------|\n| 0          | 165       | 72.37   | 165                  | 72.37              |\n| 1          | 63        | 27.63   | 228                  | 100.00             |\n\n**Binomial Proportion for death_flag = 1**\n\n-   Proportion: 0.2763\\\n-   ASE: 0.0296\\\n-   95% Lower Conf Limit: 0.2183\\\n-   95% Upper Conf Limit: 0.3344\n\n**Exact Confidence Limits**\n\n-   95% Lower Conf Limit: 0.2193\\\n-   95% Upper Conf Limit: 0.3392\n\n**Test of H0: Proportion = 0.19**\n\n-   ASE under H0: 0.0260\\\n-   Z: 3.3223\\\n-   One-sided Pr \\> Z: 0.0004\\\n-   Two-sided Pr \\> \\|Z\\|: 0.0009\\\n-   Sample Size: 228\n\n",
    "supporting": [
      "binomial_test_files"
    ],
    "filters": [],
    "includes": {}
  }
}