{
  "hash": "f3d6fb0d0f43ba83c1c3b8791c535153",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: \"SAS Jonckheere-Terpstra Test\"\n---\n\n\n## Background\n\nThe Jonckheere-Terpstra (JT) test is a nonparametric method designed to detect ordered differences across categories. It offers an advantageous alternative to more general tests for class differences, such as the Kruskal-Wallis test, particularly when the analysis is conducted using the WILCOXON option within the NPAR1WAY procedure. $^{[1]}$\n\nThe JT test is particularly well-suited for dose-response or trend analysis with ordered categorical data, where the objective is to ascertain whether an increment in dosage leads to a corresponding escalation or reduction in the response variable.$^{[2]}$$^{[5]}$ Unlike other statistical evaluations that might focus on identifying isolated differences between groups, this test is specifically tailored to uncover an overarching trend within the data.\n\n## SAS Procedure\n\nTo request Jonckheere-Terpstra test, specify the **JT** option in the Table statement like below:\n\n\n```{sas}\n#| eval: false\nproc freq; \n    table Var1 * Var2 / JT; \nQuit;\n```\n\n\nThe JT option in the TABLES statement provides the Jonckheere-Terpstra test.\n\nPROC FREQ also provides exact p-values for the Jonckheere-Terpstra test. You can request the exact test by specifying the **JT** option in the EXACT statement.$^{[3]}$\n\n## Data used 1\n\nThis dataset has been generated using example data which aligned with the specifications outlined in the section on the Jonckheereâ€“Terpstra test from reference \\[5\\]. It represents the duration of hospital stays for a randomly selected group of patients across three distinct ICU departments: cardiothoracic, medical, and neurosurgical.\n\n\n```{sas}\n#| eval: false\ndata ICU_Stay;\n    input ICU $ Stay;\n    label Stay = 'Length of Stay in Days';\n    datalines;\nCardiothoracic 7\nMedical 4\nCardiothoracic 1\nMedical 7\nCardiothoracic 2\nMedical 16\nCardiothoracic 6\nMedical 11\nCardiothoracic 11\nMedical 21\nCardiothoracic 8\nNeurosurgical 20\nNeurosurgical 25\nNeurosurgical 13\nNeurosurgical 9\nNeurosurgical 14\nNeurosurgical 11\n;\nrun;\n\nproc sort data=ICU_Stay;\n    by ICU Stay;\nrun;\n```\n\n\n## Example Code using 1\n\nThe code performs a frequency analysis on the 'ICU_Stay' dataset, examining the relationship between 'ICU' and 'Stay' variables. It applies the Jonckheere-Terpstra test using JT option to identify trends in the ordered categorical 'Stay' variable. The output is streamlined by omitting percentages and totals for columns and rows with the 'nopercent nocol norow' options, emphasizing the Jonckheere-Terpstra test outcomes.\n\n\n```{sas}\n#| eval: false\nproc freq data=ICU_Stay; \n    table ICU * Stay / JT nopercent nocol norow; \nrun;\n```\n\n\n## Test Result 1\n\n![Test Result 1](../../CAMIS/images/jonchkheere_terpstra/result1.png \"Test Result 1\")\n\nComparing this with a standard Normal distribution gives a P value of 0.005, indicating that the increase in length of stay with ICU is significant, in the order cardiothoracic, medical and neurosurgical.\n\n## Data used 2\n\nThis dataset incorporates illustrative data extracted from reference \\[3\\]. It encapsulates the responses of subjects randomly assigned to one of four treatment arms: placebo, low dosage(20mg), medium dosage(60mg), and high dosage(180mg). The variable of interest is a continuous measure. The variable 'groupn' is used to provide an order of 'group'.\n\n\n```{sas}\n#| eval: false\ndata contin;\n    input groupn group $  subject response;\n    cards;\n0 Placebo 01 27\n0 Placebo 02 28\n0 Placebo 03 27\n0 Placebo 04 31\n0 Placebo 05 34\n0 Placebo 06 32\n1 20mg 01 31\n1 20mg 02 35\n1 20mg 03 34\n1 20mg 04 32\n1 20mg 05 31\n1 20mg 06 33\n2 60mg 01 32\n2 60mg 02 33\n2 60mg 03 30\n2 60mg 04 34\n2 60mg 05 37\n2 60mg 06 36\n3 180mg 01 40\n3 180mg 02 39\n3 180mg 03 41\n3 180mg 04 38\n3 180mg 05 42\n3 180mg 06 43\n;\nrun;\n```\n\n\n## Example Code using 2\n\nThe code is performing a Jonckheere-Terpstra trend test on a continuous 'response' variable, categorized by a 'group' variable, using the 'proc freq' procedure. The analysis is applied to the dataset named 'contin'. The result is presented with a title \"Jonckheere-Terpstra Trend Test for Continuous Data\", indicating the specific nature of the test being conducted. The 'JT' option is used to specify the Jonckheere-Terpstra test.\n\n\n```{sas}\n#| eval: false\nproc freq data=contin; \n    tables group * response/JT; \n    title \"Jonckheere-Terpstra Trend Test for Continuous Data\"; \nrun;\n```\n\n\n## Test Result 2\n\n![Test Result 2](../../CAMIS/images/jonchkheere_terpstra/result2.png \"Test Result 2\")\n\nThere is a significant trend across different groups in the response gives a P value of \\<.0001.\n\n## EXACT Options\n\nWith EXACT statement, the exact version and it Monte Carlo approximation can be also conducted. However, it should be noted that the exact test, i.e., a permuation test takes a long time to compelete the task even for a small dataset.\n\n\n```{sas}\n#| eval: false\nproc freq data = inds;\n    title \"Asymptotic p-value calculation\";\n    table ICU * Stay / jt;\n    ods output JTTest = o_jt;\nrun;\n\nproc freq data = inds;\n  title \"Approximation of exact test by resampling\";\n  table ICU * Stay / jt;\n  exact jt / mc seed = 4989 n = 10000 alpha = 0.05;\n  ods output JTTestMC = o_jt_sim;\nrun;\n\n```\n\n\n## Conclusion\n\nThe JT test is particularly useful in scenarios such as dose-response studies in pharmacology, where the interest lies in whether increasing doses of a drug lead to a monotonic increase in the response.\n\n## Reference\n\n\\[1\\] SAS Institute Inc. (n.d.). SAS Help Center. Retrieved August 7, 2024, from https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/statug/statug_freq_details77.htm\n\n\\[2\\] Pennsylvania State University. (n.d.). 11.4 - Safety and Efficacy (Phase II) Studies: Trend Analysis. In STAT 509: Advanced Statistics for the Health Sciences. Retrieved August 7, 2024, from https://online.stat.psu.edu/stat509/lesson/11/11.4\n\n\\[3\\] SAS Institute Inc. (n.d.). FREQ Procedure: Syntax. In SAS/STAT 14.2 User's Guide. Retrieved August 7, 2024, from https://documentation.sas.com/doc/en/pgmsascdc/9.4_3.5/statug/statug_freq_syntax08.htm\n\n\\[4\\] Park, C., Hsiung, J.-T., Soohoo, M., & Streja, E. (2019). Choosing Wisely: Using the Appropriate Statistical Test for Trend in SAS\n\n\\[5\\] Bewick V, Cheek L, Ball J. Statistics review 10: Further nonparametric methods. Crit Care. 2004;8(4):R131-R139. doi:10.1186/cc468904. PMCID: PMC468904.[PubMed Central](https://www.ncbi.nlm.nih.gov/pmc/articles/PMC468904/).\n\n",
    "supporting": [
      "jonchkheere_terpstra_files/figure-html"
    ],
    "filters": [],
    "includes": {}
  }
}