{
  "hash": "28742d52d3752610a2163797eae962f1",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Estimating Cumulative Incidence Functions Using SAS\"\n---\n\n\n\n## Objective\n\nIn this document we present how to estimate the cumulative incidence function (CIF) in SAS (version 9.4). We focus on the competing risks model where each subject experiences only one out of *k* possible events as depicted in the figure below.\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](../images/survival_competing_risks/cr.jpg){fig-align='center' width=25%}\n:::\n:::\n\n\n\n### Data used\n\nThe bone marrow transplant (BTM) dataset as presented by Guo & So (2018) is used. The dataset has the following variables:\n\n-   `Group` has three levels, indicating three disease groups: ALL, AML-Low Risk, AML-High Risk.\n\n-   `T` is the disease-free survival time in days. A derived variable `TYears = T/365.25` is used in the analysis.\n\n-   `Status` has value 0 if `T` is censored; 1 if `T` is time to relapse; 2 if `T` is time to death.\n\n-   `WaitTime` is the waiting time to transplant in days. This variable is not used here.\n\n-   A new variable `ID` is created.\n\nSAS code to prepare the data:\n\n\n\n::: {.cell}\n\n```{.sas .cell-code}\nproc format;\n    value DiseaseGroup 1='ALL'\n                      2='AML-Low Risk'\n                      3='AML-High Risk';\n    value EventStatus  0='Censored'\n                      1='Relapse'\n                      2='Death';\nrun;\n\nlibname datalib \"..\\data\";\ndata bmt;\n    set datalib.bmt;\n    TYears = T / 365.25;\n    ID = _n_;\n    format Group DiseaseGroup.;\n    format Status EventStatus.;\nrun;\n```\n:::\n\n\n\n## Estimating CIFs in SAS\n\nPROC LIFETEST is used to estimate the CIFs in SAS. For illustration, we model the time to relapse.  \n\n\n\n::: {.cell}\n\n```{.sas .cell-code}\nods graphics on;\nproc lifetest data=bmt \n              plots=cif(test) \n              error=aalen\n              conftype=loglog\n              outcif=cif1 \n              timelist=0.5 1 1.5 2 3; \n    time Tyears * Status(0) / eventcode=1; \n    strata Group / order=internal; \n    format Group DiseaseGroup.;\nrun; \nods graphics off;\n```\n:::\n\n\n\nBelow are selected outputs for comparison with the R outputs in the companion document.\n\nCIF estimates for time to relapse at selected timepoints for 'AML-Low Risk' patients:\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](../images/survival_competing_risks/cifSAS.jpg){fig-align='center' width=75%}\n:::\n:::\n\n\n\nCIF estimates for time to relapses:\n\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output-display}\n![](../images/survival_competing_risks/cifPlot.png){fig-align='center' width=75%}\n:::\n:::\n\n\n\nTwo points to note:\n\n1.  By default the variance of the estimated CIF are estimated with Aalen's asymptotic method. This can be changed to the delta method by setting `error=delta` in the PROC LIFETEST statement.\n\n2.  By default the log-log transformation is used to produce the pointwise confidence intervals (CIs) for the estimated CIFs. To select other methods, for instance log, set `conftype=log`.\n\n## Reference\n\nAalen O. (1978). Nonparametric Estimation of Partial Transition Probabilities in Multiple Decrement Models, *Annals of Statistics*, 6:534-545.\n\nGray R. (1988). A Class of K-Sample Tests for Comparing the Cumulative Incidence of a Competing Risk, *Annals of Statistics*, 16:1141-1154.\n\nGray R. (2024). *cmprsk: Subdistribution Analysis of Competing Risks*. <https://cran.r-project.org/web/packages/cmprsk/cmprsk.pdf>\n\nGuo C and So Y. (2018). Cause-Specific Analysis of Competing Risks Using the PHREG Procedure. In *Proceedings of the SAS Global Forum 2018 Conference*. Cary, NC: SAS Institute Inc. <https://support.sas.com/resources/papers/proceedings18/2159-2018.pdf>.\n\nSAS (2019). Statistical Analysis Software. Users' Guide Statistics Version 9.4. SAS Institute Inc., Cary.\n",
    "supporting": [
      "survival_cif_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}