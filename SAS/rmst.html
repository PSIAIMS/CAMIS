<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Restricted Mean Survival Time (RMST) in SAS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../images/logo.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-635a35c16803d16fd9db22f392043487.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../images/logo.png" alt="" class="navbar-logo light-content">
    <img src="../images/logo.png" alt="" class="navbar-logo dark-content">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-publications-and-projects" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Publications and Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-publications-and-projects">    
        <li>
    <a class="dropdown-item" href="../publication/white_paper.html"><i class="bi bi-file-earmark-word-fill" role="img">
</i> 
 <span class="dropdown-text">White Paper</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../publication/conference.html"><i class="bi bi-easel3-fill" role="img">
</i> 
 <span class="dropdown-text">Conferences</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../publication/dissertation.html"><i class="bi bi-mortarboard-fill" role="img">
</i> 
 <span class="dropdown-text">Academic Projects</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="../minutes/index.html"> 
<span class="menu-text">Meeting Minutes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../blogs/index.html"> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-help" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Help</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-help">    
        <li>
    <a class="dropdown-item" href="https://github.com/PSIAIMS/CAMIS/issues"><i class="bi bi-bug-fill" role="img">
</i> 
 <span class="dropdown-text">Report a Bug</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../contribution/get_started.html"><i class="bi bi-git" role="img">
</i> 
 <span class="dropdown-text">Get Started with Your Environment</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../contribution/contribution.html"><i class="bi bi-person-raised-hand" role="img">
</i> 
 <span class="dropdown-text">Get Started with CAMIS</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../contribution/package_review.html"><i class="bi bi-box-fill" role="img">
</i> 
 <span class="dropdown-text">Get Started with a New R Package</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
    <a href="https://github.com/PSIAIMS/CAMIS/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#common-mistakes-doing-rmst-in-sas" id="toc-common-mistakes-doing-rmst-in-sas" class="nav-link active" data-scroll-target="#common-mistakes-doing-rmst-in-sas">Common Mistakes doing RMST in SAS</a></li>
  <li><a href="#data-used" id="toc-data-used" class="nav-link" data-scroll-target="#data-used">Data used</a></li>
  <li><a href="#view-your-data---kaplan-meier-curves" id="toc-view-your-data---kaplan-meier-curves" class="nav-link" data-scroll-target="#view-your-data---kaplan-meier-curves">View your data - Kaplan-Meier Curves</a></li>
  <li><a href="#setting-tau" id="toc-setting-tau" class="nav-link" data-scroll-target="#setting-tau">Setting tau</a></li>
  <li><a href="#method-1-inverse-probability-censoring-weighting-ipcw-estimation-proc-rmstreg" id="toc-method-1-inverse-probability-censoring-weighting-ipcw-estimation-proc-rmstreg" class="nav-link" data-scroll-target="#method-1-inverse-probability-censoring-weighting-ipcw-estimation-proc-rmstreg">Method 1: Inverse Probability Censoring Weighting (IPCW) Estimation (proc rmstreg)</a>
  <ul class="collapse">
  <li><a href="#linear-link-model---provides-estimates-of-treatment-differences" id="toc-linear-link-model---provides-estimates-of-treatment-differences" class="nav-link" data-scroll-target="#linear-link-model---provides-estimates-of-treatment-differences">Linear link model - provides estimates of treatment differences</a></li>
  <li><a href="#log-link-model---provides-estimates-of-treatment-ratios" id="toc-log-link-model---provides-estimates-of-treatment-ratios" class="nav-link" data-scroll-target="#log-link-model---provides-estimates-of-treatment-ratios">Log link model - provides estimates of treatment ratios</a></li>
  </ul></li>
  <li><a href="#method-2-pseudo-value-estimation-proc-rmstreg" id="toc-method-2-pseudo-value-estimation-proc-rmstreg" class="nav-link" data-scroll-target="#method-2-pseudo-value-estimation-proc-rmstreg">Method 2: Pseudo Value Estimation (proc rmstreg)</a></li>
  <li><a href="#method-3-rmst-area-under-the-curve-method-proc-lifetest" id="toc-method-3-rmst-area-under-the-curve-method-proc-lifetest" class="nav-link" data-scroll-target="#method-3-rmst-area-under-the-curve-method-proc-lifetest">Method 3: RMST Area under the curve method (proc lifetest)</a>
  <ul class="collapse">
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  <li><a href="#version" id="toc-version" class="nav-link" data-scroll-target="#version">Version</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Restricted Mean Survival Time (RMST) in SAS</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">29 October, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>Under the situation where you time to event outcome has non-proportional hazards over time, the commonly used Cox Proportional Hazards regression analysis and the log-rank test can be invalid - especially when the survival curves are crossing. One alternative is to analyse the Restricted Mean Survival Time (RMST).</p>
<p>There are a few ways in SAS to estimate the RMST. A parametric approach is to use general estimating equations(GEE) modelling using linear or log-linear link functions and the IPCW or pseudo-value approach as described in Methods 1 and 2 below. Alternatively you can use a non-parametric approach using an Area Under the Curve (AUC) calculated for the Kaplan-Meier curves.</p>
<p>For treatment comparisons, the RMST can be compared across treatments and it was recommended by the FDA in draft guidance in 2020 for analysis of Acute Myeloid Leukemia (AML) <a href="https://www.fda.gov/regulatory-information/search-fda-guidance-documents/acute-myeloid-leukemia-developing-drugs-and-biological-products-treatment">here</a>. AML commonly has an initial higher rate of death following randomization, followed by a plateauing rate of death over time (Non-proportional hazards).</p>
<p>The main advantage of this method is its easy clinical interpretation (e.g.&nbsp;with an endpoint of time to death - we are measuring average time to death). The biggest disadvantage is you have to select a time at which to calculated the average over: this time is called <code>tau</code>. If data is not mature enough, you may get a unreliable result. In addition, one could accuse analysts of selecting <code>tau</code> such that you get the ‘most significant’ result in the direction you desire!</p>
<p>References are found at the end of this page.</p>
<section id="common-mistakes-doing-rmst-in-sas" class="level3">
<h3 class="anchored" data-anchor-id="common-mistakes-doing-rmst-in-sas">Common Mistakes doing RMST in SAS</h3>
<p><strong>Issue 1:</strong> page 8615 of User’s Guide for RMSTREG Procedure <a href="https://support.sas.com/documentation/onlinedoc/stat/151/rmstreg.pdf">here</a> says it expects the event indicator (Status) to be 1=event (death time) and 0=censor. If you follow this guidance, then you must ensure that you use: <code>model time*status(0)</code> to ensure SAS knows that 0 is the censored observation.</p>
<p>A common mistake is to get the (0) or (1) indicator the wrong way around. For example, it’s common to use a <code>cnsr</code> variable which is set to 1=censored or 0=event. If this is used, then you must use<br>
<code>model time*cnsr(1)</code>! Always make sure you check the SAS output to verify your counts of Events and Censored observations is the correct way around.</p>
<p>Throughout this page, we will use cnsr(1) approach.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/rmst/SASrmstreg2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<p><strong>Issue 2:</strong> page 8616 of User’s Guide for RMSTREG Procedure <a href="https://support.sas.com/documentation/onlinedoc/stat/151/rmstreg.pdf">here</a> tells us that if we omit the option <code>tau=xx</code> then SAS sets <code>tau</code> using the largest <strong>event</strong> time. However, what SAS actually does is use the largest <code>time</code> from either events or censored observations.</p>
<p>The selection of <code>tau</code> for RMST analysis is very important. It’s the period of time the average (or AUC for proc lifetest) is calculated over. If events are no longer occurring on both treatment groups, then you may not be looking at the key time period of interest. Therefore, it is better practice, to calculate <code>tau</code> yourself and set this as an option in the SAS code, (commonly based on the minimum time of the last event observed in each treatment group).</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/rmst/SASrmstreg1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="data-used" class="level2">
<h2 class="anchored" data-anchor-id="data-used">Data used</h2>
<p>We are using the lung_cancer.csv dataset found <a href="CAMIS/data at main · PSIAIMS/CAMIS">here</a>. If you tabulate the censoring flag variable <code>cnsr</code><br>
(1: censored, 0=event), we have 165 events, and 63 censored values.</p>
<p>We only need the variables listed below</p>
<ul>
<li><p>time - Time(days) to event</p></li>
<li><p>cnsr - 1=censored, 0=event</p></li>
<li><p>age - Age of subject</p></li>
<li><p>sex - 1=male, 2 = female</p></li>
<li><p>trt01pn - 1=Active, 2=Placebo</p></li>
</ul>
<p>For example:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>time</th>
<th>cnsr</th>
<th>trt01pn</th>
<th>age</th>
<th>sex</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>306</td>
<td>0</td>
<td>1</td>
<td>74</td>
<td>1</td>
</tr>
<tr class="even">
<td>455</td>
<td>0</td>
<td>1</td>
<td>68</td>
<td>1</td>
</tr>
<tr class="odd">
<td>1010</td>
<td>1</td>
<td>1</td>
<td>56</td>
<td>1</td>
</tr>
<tr class="even">
<td>210</td>
<td>0</td>
<td>1</td>
<td>57</td>
<td>1</td>
</tr>
</tbody>
</table>
</section>
<section id="view-your-data---kaplan-meier-curves" class="level2">
<h2 class="anchored" data-anchor-id="view-your-data---kaplan-meier-curves">View your data - Kaplan-Meier Curves</h2>
<p>It is good practice to first view the shape of your Kaplan-Meier curves. As you can see our treatment curves are crossing at approximately 300 days.</p>
<p>It is very important to pre-specify your approach for selection of <code>tau</code>. As you can see from the curves, if we compared the period 0 to 6 months, vs 0 to 18 months, we would get very different results for the treatment comparison.</p>
<div class="cell">
<pre class="sas cell-code"><code>proc lifetest data=adcibc  conftype=log;
    time time*cnsr(1);
    strata trt01pn;
Run;</code></pre>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/rmst/kmplot.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="setting-tau" class="level2">
<h2 class="anchored" data-anchor-id="setting-tau">Setting tau</h2>
<p>The code below calculates <code>tau</code> as the minimum time of the last event observed in each treatment group. This will be the period of time, our AUC will be calculated over. As cnsr=0 are events, we only select these observations. Below, the maximum event in treatment 1 = 883 days and in treatment 2 = 350 days. We therefore set <code>tau</code> = 350. This method avoids including in the AUC a period of time where events are no longer occurring in both treatments. You can see why setting <code>tau</code> is very important as we are likely to get very different AUCs calculating over the 350 day as opposed to the 883 day period!</p>
<div class="cell">
<pre class="sas cell-code"><code>proc sort data=lung_cancer (where=(cnsr=0)) out=tau1;
    by  trt01pn time;
run;

data tau1 (keep=studyid trt01pn time);
    set tau1 ;
    by trt01pn time;
    if last.trt01pn then output;
run;

proc sort data=tau1;
    by descending time;
run;

data tau2;
    set tau1 end=last;
    by descending time;
    if last then call symput("_tau",put(time,best8.));
run;

%put &amp;_tau;
350</code></pre>
</div>
</section>
<section id="method-1-inverse-probability-censoring-weighting-ipcw-estimation-proc-rmstreg" class="level2">
<h2 class="anchored" data-anchor-id="method-1-inverse-probability-censoring-weighting-ipcw-estimation-proc-rmstreg">Method 1: Inverse Probability Censoring Weighting (IPCW) Estimation (proc rmstreg)</h2>
<p>The Inverse probability censoring weighting estimation as per <a href="https://pubmed.ncbi.nlm.nih.gov/24292992/">Tian L, Zhao L, Wei LJ. Biostatistics 2014, 15, 222-233</a> is found in SAS using <code>Proc rmstreg</code> and <code>method=ipcw</code>. This is using a generalized linear model (linear or log-linear options are available) to model right censored data over time. The estimation method uses : Generalized estimating equations (GEE).</p>
<p>This method uses Kaplan-Meier estimation to obtain weights and it has been shown that weighting in this way provides an unbiased estimate for an adjusted survival curve <a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC5845164/">Calkins 2018</a>. See <a href="https://bmcmedresmethodol.biomedcentral.com/articles/10.1186/1471-2288-13-152">Royston &amp; Parmar (2013)</a> for more detail.</p>
<p>To calculate the stratified weights by treatment and use them in the iterative estimation process, you need to specify <code>strata=trt01pn</code></p>
<p>In the output, its important to check that your event/censoring flag is the right was around and tau is set as expected. (165 events and tau=335)</p>
<section id="linear-link-model---provides-estimates-of-treatment-differences" class="level3">
<h3 class="anchored" data-anchor-id="linear-link-model---provides-estimates-of-treatment-differences">Linear link model - provides estimates of treatment differences</h3>
<div class="cell">
<pre class="sas cell-code"><code>proc rmstreg data=adcibc tau=&amp;_tau;
    class trt01pn sex;
    model time*cnsr(1) =trt01pn sex age /link=linear method=ipcw (strata=trt01pn);
    lsmeans trt01pn/pdiff=control('2') cl alpha=0.05;
    ods output lsmeans=lsm diffs= diff;
run;</code></pre>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/rmst/rmstreg_output1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<p>The above model results in a <code>restricted mean survival time</code> estimate of 257.16 days on treatment 1 vs 267.04 days on treatment 2. The difference (Active-Placebo) is -9.88 days (95% CI: -39.0 to 19.25, p=0.5061). Hence, there is no evidence of a difference between the treatments with respect to RMST when we look over the Kaplan-Meier plot from 0 to 350 days.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/rmst/rmstreg_output2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="log-link-model---provides-estimates-of-treatment-ratios" class="level3">
<h3 class="anchored" data-anchor-id="log-link-model---provides-estimates-of-treatment-ratios">Log link model - provides estimates of treatment ratios</h3>
<p>The code is similar to above. We include the option <code>exp</code> on the lsmeans row, since this back transforms (exponentiates) the estimates of the RMST (and 95% CI) for each treatment and for the treatment difference back onto the days scale (rather than log(days) scale). NOTE: if you use the <code>ilink</code> option and link=log method, this does the same (given the link is log), however, does not back transform the treatment differences. It is currently believed that SAS is using the delta method from the treatment arm RMSTs, to estimate the standard error for the RMST ratio.</p>
<p>Similar to the linear model, we obtain results of a <code>restricted mean survival time</code> estimate of 255.21 days on treatment 1 vs 264.75 days on treatment 2. The difference (Active-Placebo) on the log scale is -0.03667 (95% CI: -0.1493 to 0.07596, p=0.5234) but this is hard to interpret. Hence, once back transformed, the treatment ratio (Active/Placebo) is 0.9640 (95% CI: 0.8613 to 1.0789, p=0.5234).</p>
<div class="cell">
<pre class="sas cell-code"><code>proc rmstreg data=adcibc tau=&amp;_tau;
    class trt01pn sex;
    model time*cnsr(1) =trt01pn sex age /link=log method=ipcw (strata=trt01pn);
    lsmeans trt01pn/pdiff=control('2') cl alpha=0.05 exp;
    ods output lsmeans=lsm diffs= diff;
run;</code></pre>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/rmst/rmstreg_output3.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="method-2-pseudo-value-estimation-proc-rmstreg" class="level2">
<h2 class="anchored" data-anchor-id="method-2-pseudo-value-estimation-proc-rmstreg">Method 2: Pseudo Value Estimation (proc rmstreg)</h2>
<p>The pseudo-observations method <a href="https://pubmed.ncbi.nlm.nih.gov/15690989/">Andersen, Hansen and Klein 2004</a>, is available in SAS using the method=pv option. You use the link=linear or link=log options and output is similarly interpreted as described for Method 1 IPCW method.</p>
<div class="cell">
<pre class="sas cell-code"><code>proc rmstreg data=adcibc tau=&amp;_tau;
    class trt01pn sex ;
    model time*cnsr(1) =trt01pn sex age /link=linear  method=pv;
    lsmeans trt01pn/pdiff=control('2') cl alpha=0.05;
    ods output lsmeans=lsm diffs= diff;
run;</code></pre>
</div>
</section>
<section id="method-3-rmst-area-under-the-curve-method-proc-lifetest" class="level2">
<h2 class="anchored" data-anchor-id="method-3-rmst-area-under-the-curve-method-proc-lifetest">Method 3: RMST Area under the curve method (proc lifetest)</h2>
<p>A non-parametric method to calculate the RMST is available using the AUC Kaplan-Meier curves.</p>
<div class="cell">
<pre class="sas cell-code"><code>proc lifetest data=adcibc plots=(rmst  s) rmst  (tau=&amp;_tau);
    time time*cnsr(1) ;
    strata trt01pn / diff=control('2') ;
run;</code></pre>
</div>
<p>As shown below, SAS only outputs the estimates and SEs. However, a 95% CI (assuming a normal distribution) can be calculated in an additional datastep using estimate +/- 1.96 * SE.</p>
<p>The AUC method results in a <code>restricted mean survival time</code> estimate of 248.2156 days on treatment 1 vs 272.9520 days on treatment 2. The difference (Active-Placebo) is -24.7364. Calculating 95% CIs, for this results in 95% CI: -54.3971 to 4.9243, p=0.1021). Hence, there is no evidence of a difference between the treatments with respect to RMST when we look over the Kaplan-Meier plot from 0 to 350 days.</p>
<p>Various multiple testing p-value adjustments are also available using this method.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/rmst/rmstreg_output4.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<section id="references" class="level3">
<h3 class="anchored" data-anchor-id="references">References</h3>
<ol type="1">
<li><a href="https://onbiostatistics.blogspot.com/2021/04/restricted-mean-survival-time-rmst-for.html">On Biostatistics and Clinical trials Monday April 19 2021</a></li>
<li><a href="https://bmcmedresmethodol.biomedcentral.com/articles/10.1186/1471-2288-13-152">Royston &amp; Parmar (2013)</a></li>
<li><a href="https://support.sas.com/documentation/onlinedoc/stat/151/rmstreg.pdf">SAS User’s Guide for RMSTREG Procedure</a></li>
<li><a href="https://support.sas.com/resources/papers/proceedings19/3013-20">Analyzing RMST using SAS/STAT, Changbin Guo and Yu LIang, SAS Institute, Paper SAS3013-2019</a></li>
<li><a href="https://onlinelibrary.wiley.com/doi/abs/10.1002/pst.1846">Huang &amp; Kuan (2017)</a></li>
<li><a href="https://pubmed.ncbi.nlm.nih.gov/24292992/">Tian L, Zhao L, Wei LJ. Biostatistics 2014, 15, 222-233</a></li>
<li><a href="https://www.fda.gov/regulatory-information/search-fda-guidance-documents/acute-myeloid-leukemia-developing-drugs-and-biological-products-treatment">FDA 2020 guidance</a> and <a href="https://www.fda.gov/media/140821/download">download</a></li>
<li><a href="https://pubmed.ncbi.nlm.nih.gov/15690989/">Andersen, Hansen and Klein 2004</a></li>
<li><a href="https://pmc.ncbi.nlm.nih.gov/articles/PMC5845164/">Calkins KL, Canan CE, Moore RD, Lesko CR, Lau B. An application of restricted mean survival time in a competing risks setting: comparing time to ART initiation by injection drug use. BMC Med Res Methodol. 2018;18:27. doi: 10.1186/s12874-018-0484-z</a></li>
</ol>
</section>
<section id="version" class="level3">
<h3 class="anchored" data-anchor-id="version">Version</h3>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>─ Session info ───────────────────────────────────────────────────────────────
 setting  value
 version  R version 4.4.2 (2024-10-31)
 os       macOS Sequoia 15.6.1
 system   aarch64, darwin20
 ui       X11
 language (EN)
 collate  en_US.UTF-8
 ctype    en_US.UTF-8
 tz       Europe/London
 date     2025-08-29
 pandoc   3.4 @ /Applications/RStudio.app/Contents/Resources/app/quarto/bin/tools/aarch64/ (via rmarkdown)

─ Packages ───────────────────────────────────────────────────────────────────
 ! package * version date (UTC) lib source
 R rmst      &lt;NA&gt;    &lt;NA&gt;       [?] &lt;NA&gt;

 [1] /Users/christinafillmore/Documents/GitHub/CAMIS/renv/library/macos/R-4.4/aarch64-apple-darwin20
 [2] /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library

 R ── Package was removed from disk.

─ External software ──────────────────────────────────────────────────────────
 setting value
 SAS     9.04.01M7P08062020

──────────────────────────────────────────────────────────────────────────────</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/psiaims\.github\.io\/CAMIS\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>